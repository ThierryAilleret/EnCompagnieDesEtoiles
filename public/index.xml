<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Bienvenue En Compagnie des √âtoiles on En Compagnie des √âtoiles</title>
    <link>https://encompagniedesetoiles.fr/</link>
    <description>Recent content in Bienvenue En Compagnie des √âtoiles on En Compagnie des √âtoiles</description>
    <generator>Hugo -- 0.147.9</generator>
    <language>FR-fr</language>
    <atom:link href="https://encompagniedesetoiles.fr/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Al dente</title>
      <link>https://encompagniedesetoiles.fr/produits/luminaire-toubarbla/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/produits/luminaire-toubarbla/</guid>
      <description>Sph√®re lumineuse en... bo√Ætes de p√¢tes !</description>
    </item>
    <item>
      <title>Commande annul√©e</title>
      <link>https://encompagniedesetoiles.fr/cancel.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/cancel.html</guid>
      <description>&lt;p&gt;üòï Paiement annul√©&lt;/p&gt;
&lt;p&gt;Il semble que vous ayez annul√© le processus de paiement.&lt;/p&gt;
&lt;p&gt;Si c&amp;rsquo;√©tait une erreur, vous pouvez r√©essayer √† tout moment.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://encompagniedesetoiles.fr/&#34;&gt;Retour √† la boutique&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Commande valid√©e</title>
      <link>https://encompagniedesetoiles.fr/success.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/success.html</guid>
      <description>&lt;p&gt;Merci pour votre commande !&lt;/p&gt;
&lt;p&gt;Votre paiement a √©t√© effectu√© avec succ√®s.&lt;/p&gt;
&lt;p&gt;Nous pr√©parons votre commande avec soin et vous informerons par email.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://encompagniedesetoiles.fr/&#34;&gt;Retour √† l&amp;rsquo;accueil&lt;/a&gt;&lt;/p&gt;
&lt;script&gt;
  // üßπ Vider le panier
  localStorage.removeItem(&#34;panier&#34;);

  // üîÑ Mettre √† jour l&#39;affichage du mini-panier si n√©cessaire
  window.dispatchEvent(new Event(&#34;panierMisAJour&#34;));

&lt;/script&gt;</description>
    </item>
    <item>
      <title>Conditions G√©n√©rales de Vente</title>
      <link>https://encompagniedesetoiles.fr/conditions-generales-vente/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/conditions-generales-vente/</guid>
      <description>CGV applicables aux commandes sur le site encompagniedesetoiles.fr</description>
    </item>
    <item>
      <title>Finaliser ma commande</title>
      <link>https://encompagniedesetoiles.fr/checkout.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/checkout.html</guid>
      <description>&lt;!-- Autocompl√©tion d&#39;adresse via Geoportail --&gt;
&lt;script&gt;
document.addEventListener(&#34;DOMContentLoaded&#34;, () =&gt; {

  // üîÅ Surveille les champs nom, pr√©nom, adresse, mail
  [&#34;nom&#34;, &#34;prenom&#34;, &#34;adresse&#34;, &#34;mail&#34;, &#34;nom_exp&#34;, &#34;prenom_exp&#34;, &#34;adresse_exp&#34;, &#34;mail_exp&#34;].forEach(id =&gt; {
    const champ = document.getElementById(id);
    if (champ) {
      champ.addEventListener(&#34;input&#34;, surveillerEtapes);
    }
  });

	// Autocompl√©tion adresse
  const adresseInput = document.getElementById(&#34;adresse&#34;);
	adresseInput.addEventListener(&#34;input&#34;, async e =&gt; {
    const q = e.target.value.trim();
    if (q.length &lt; 3) return;
		const res = await fetch(`https://data.geopf.fr/geocodage/completion?text=${encodeURIComponent(q)}&amp;limit=5&amp;terr=METROPOLE`);
    const data = await res.json();
		//console.log(&#34;üîµ Suggestions re√ßues :&#34;, data);
    const cont = document.getElementById(&#34;autocomplete-container&#34;);
		cont.innerHTML = &#34;&#34;;
		cont.style.display = &#34;none&#34;;

		let count = 0;
		data.results?.forEach(item =&gt; {
			const div = document.createElement(&#34;div&#34;);
			div.className = &#34;suggestion&#34;;
			div.textContent = item.fulltext || `${item.number} ${item.street} ${item.city}`;
			div.addEventListener(&#34;click&#34;, () =&gt; {
				adresseInput.value = div.textContent;
				remplirAdresseGeo(item);
				cont.innerHTML = &#34;&#34;;
				cont.style.display = &#34;none&#34;;
			});
			cont.appendChild(div);
			count++;
		});
		cont.style.display = count ? &#34;block&#34; : &#34;none&#34;
  });
	
	// Autocompl√©tion adresse_exp
  const adresseExpInput = document.getElementById(&#34;adresse_exp&#34;);
	adresseExpInput.addEventListener(&#34;input&#34;, async e =&gt; {
    const q = e.target.value.trim();
    if (q.length &lt; 3) return;
		const res = await fetch(`https://data.geopf.fr/geocodage/completion?text=${encodeURIComponent(q)}&amp;limit=5&amp;terr=METROPOLE`);
    const data = await res.json();
		//console.log(&#34;üîµ Suggestions re√ßues :&#34;, data);
    const cont = document.getElementById(&#34;autocomplete-container_exp&#34;);
		cont.innerHTML = &#34;&#34;;
		cont.style.display = &#34;none&#34;;

		let count = 0;
		data.results?.forEach(item =&gt; {
			const div = document.createElement(&#34;div&#34;);
			div.className = &#34;suggestion&#34;;
			div.textContent = item.fulltext || `${item.number} ${item.street} ${item.city}`;
			div.addEventListener(&#34;click&#34;, () =&gt; {
				adresseExpInput.value = div.textContent;
				remplirAdresseExpGeo(item);
				cont.innerHTML = &#34;&#34;;
				cont.style.display = &#34;none&#34;;
			});
			cont.appendChild(div);
			count++;
		});
		cont.style.display = count ? &#34;block&#34; : &#34;none&#34;
  });

	//Affichage du contenu du panier
	afficherPanierDansCheckout();
});

window.addEventListener(&#34;panierMisAJour&#34;, () =&gt; {
  afficherPanierDansCheckout();
});

function afficherPanierDansCheckout() {
	const panierJSON = localStorage.getItem(&#34;panier&#34;);
	if (!panierJSON) return;

	let total = 0;
	const panier = JSON.parse(panierJSON);
	const ul = document.getElementById(&#34;panier-resume&#34;);

	ul.innerHTML = &#34;&#34;;
	panier.forEach(article =&gt; {
		const li = document.createElement(&#34;li&#34;);
		li.innerHTML = `
			&lt;div style=&#34;display:flex; gap:10px; margin-bottom:10px;&#34;&gt;
				&lt;img src=&#34;${article.image}&#34; alt=&#34;${article.nom}&#34; style=&#34;height:48px; width:auto; border-radius:4px;&#34;&gt;
				&lt;div&gt;
					&lt;strong&gt;${article.nom}&lt;/strong&gt;&lt;br&gt;
					&lt;span style=&#34;font-size:0.9em;&#34;&gt;${article.description}&lt;/span&gt;&lt;br&gt;
					&lt;span&gt;${article.quantite} √ó ${article.prix}${article.monnaie}&lt;/span&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		`;
		ul.appendChild(li);
		total += article.prix * article.quantite;
	});

	document.getElementById(&#34;total-commande&#34;).innerHTML = `&lt;strong&gt;Total :&lt;/strong&gt; ${total} ‚Ç¨ frais de port inclus`;
  const totalPaiement = document.getElementById(&#34;prix-total&#34;);
  if (totalPaiement) {
    totalPaiement.innerHTML = `Total : ${total} ‚Ç¨`;
  }
}

function remplirAdresseGeo(item) {
  const cp    = item.zipcode || &#34;&#34;;
  const ville = item.city || item.oldcity || &#34;&#34;;
  const pays  = item.country || &#34;&#34;;
  const adresse = item.fulltext || `${item.street}, ${cp} ${ville}`;
  // Pr√©remplit le champ Adresse
  document.getElementById(&#34;adresse&#34;).value = adresse;
	// Stockage
	localStorage.setItem(&#39;codePostal&#39;, cp);
	localStorage.setItem(&#39;ville&#39;, ville);
  window.adresseGoogleValidee = true;
}

function remplirAdresseExpGeo(item) {
  const cp    = item.zipcode || &#34;&#34;;
  const ville = item.city || item.oldcity || &#34;&#34;;
  const pays  = item.country || &#34;&#34;;
  const adresse = item.fulltext || `${item.street}, ${cp} ${ville}`;
  // Pr√©remplit le champ Adresse
  document.getElementById(&#34;adresse_exp&#34;).value = adresse;
	// Stockage
	localStorage.setItem(&#39;codePostal_exp&#39;, cp);
	localStorage.setItem(&#39;ville_exp&#39;, ville);
  window.adresse_expGoogleValidee = true;
}

function surveillerEtapes() {
  const nom     = document.getElementById(&#34;nom&#34;).value.trim();
  const prenom  = document.getElementById(&#34;prenom&#34;).value.trim();
  const adresse = document.getElementById(&#34;adresse&#34;).value.trim();
  const mail = document.getElementById(&#34;mail&#34;).value.trim();

  const nom_exp     = document.getElementById(&#34;nom_exp&#34;).value.trim();
  const prenom_exp  = document.getElementById(&#34;prenom_exp&#34;).value.trim();
  const adresse_exp = document.getElementById(&#34;adresse_exp&#34;).value.trim();
  const mail_exp    = document.getElementById(&#34;mail_exp&#34;).value.trim();

  const etape1 = document.getElementById(&#34;step-1&#34;);
  const etape2 = document.getElementById(&#34;step-2&#34;);
  const etape3 = document.getElementById(&#34;step-3&#34;);

  const checkmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(mail);
  const etape_1_complete = nom &amp;&amp; prenom &amp;&amp; adresse &amp;&amp; mail &amp;&amp; checkmail;
  if (etape_1_complete) {
    etape2.classList.add(&#34;actif&#34;);
		const checkmail_exp = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(mai_exp);
	  const etape_2_complete = nom_exp &amp;&amp; prenom_exp &amp;&amp; adresse_exp &amp;&amp; mail_exp &amp;&amp; checkmail_exp;
		if (etape_2_complete) {
			etape3.classList.add(&#34;actif&#34;);
			const prixTotal = document.getElementById(&#34;prix-total&#34;);
			prixTotal.style.display = &#34;block&#34;;
			const boutonPaiement = document.getElementById(&#34;checkout-button&#34;);
			boutonPaiement.classList.remove(&#34;bouton-verrouille&#34;);
			boutonPaiement.style.display = &#34;block&#34;;
		} else {
			etape3.classList.remove(&#34;actif&#34;);
			const boutonPaiement = document.getElementById(&#34;checkout-button&#34;);
			boutonPaiement.classList.add(&#34;bouton-verrouille&#34;)		
		}
  } else {
    etape2.classList.remove(&#34;actif&#34;);
		etape3.classList.remove(&#34;actif&#34;);
		const boutonPaiement = document.getElementById(&#34;checkout-button&#34;);
		boutonPaiement.classList.add(&#34;bouton-verrouille&#34;);
  }
}

function verifierEtatPaiement() {
  const panier = JSON.parse(localStorage.getItem(&#34;panier&#34;)) || [];
  const boutonStripe = document.getElementById(&#34;checkout-button&#34;);

  const steps = [
    document.getElementById(&#34;step-1&#34;),
    document.getElementById(&#34;step-2&#34;),
    document.getElementById(&#34;step-3&#34;)
  ];

  if (!boutonStripe) return;

  if (panier.length === 0) {
    // ‚ùå Retire la classe actif pour les √©tapes
    steps.forEach(step =&gt; step.classList.remove(&#34;actif&#34;));
  } else {
    // ‚úÖ Ajoute actif pour les √©tapes si l&#39;adresse est remplie
    surveillerEtapes(); // Cela r√©active step-2 et step-3 si conditions sont remplies
  }
}

window.addEventListener(&#34;panierMisAJour&#34;, function () {
    verifierEtatPaiement();
});

&lt;/script&gt;
&lt;div class=&#34;checkout-wrapper&#34;&gt;
  &lt;div class=&#34;checkout-left&#34;&gt;
    &lt;form id=&#34;checkout-form&#34;&gt;
      &lt;!-- √âtape 1 : Facturation --&gt;
      &lt;fieldset id=&#34;step-1&#34; class=&#34;etape actif&#34;&gt;
        &lt;legend&gt;&lt;span class=&#34;etape-numero&#34;&gt;1&lt;/span&gt; Facturation v2&lt;/legend&gt;
        &lt;label&gt;Nom :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;nom&#34; id=&#34;nom&#34; required /&gt;&lt;/label&gt;
        &lt;label&gt;Pr√©nom :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;prenom&#34; id=&#34;prenom&#34; required /&gt;&lt;/label&gt;
				&lt;div style=&#34;position:relative;&#34;&gt;
					&lt;label&gt;Adresse :&lt;br&gt;
						&lt;input type=&#34;text&#34; id=&#34;adresse&#34; name=&#34;adresse&#34; autocomplete=&#34;off&#34; required
									 placeholder=&#34;Saisissez une adresse&#34; /&gt;
					&lt;/label&gt;
					&lt;div id=&#34;autocomplete-container&#34;&gt;&lt;/div&gt;
				&lt;/div&gt;
        &lt;label&gt;Compl√©ment d&#39;addresse :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;complement_adresse&#34; id=&#34;complement_adresse&#34;/&gt;&lt;/label&gt;
        &lt;label&gt;Mail :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;mail&#34; id=&#34;mail&#34; required /&gt;&lt;/label&gt;
			&lt;/fieldset&gt;
      &lt;!-- √âtape 2 : Livraison --&gt;
      &lt;fieldset id=&#34;step-2&#34; class=&#34;etape&#34;&gt;
        &lt;legend&gt;&lt;span class=&#34;etape-numero&#34;&gt;2&lt;/span&gt; Livraison&lt;/legend&gt;
        &lt;label&gt;Nom :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;nom_exp&#34; id=&#34;nom_exp&#34; required /&gt;&lt;/label&gt;
        &lt;label&gt;Pr√©nom :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;prenom_exp&#34; id=&#34;prenom_exp&#34; required /&gt;&lt;/label&gt;
				&lt;div style=&#34;position:relative;&#34;&gt;
					&lt;label&gt;Adresse :&lt;br&gt;
						&lt;input type=&#34;text&#34; id=&#34;adresse_exp&#34; name=&#34;adresse_exp&#34; autocomplete=&#34;off&#34; required
									 placeholder=&#34;Saisissez une adresse&#34; /&gt;
					&lt;/label&gt;
					&lt;div id=&#34;autocomplete-container_exp&#34;&gt;&lt;/div&gt;
				&lt;/div&gt;
        &lt;label&gt;Compl√©ment d&#39;addresse :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;complement_adresse_exp&#34; id=&#34;complement_adresse_exp&#34;/&gt;&lt;/label&gt;
        &lt;label&gt;Mail :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;mail_exp&#34; id=&#34;mail_exp&#34; required /&gt;&lt;/label&gt;
			&lt;/fieldset&gt;
      &lt;!-- √âtape 3 : Paiement --&gt;
      &lt;fieldset id=&#34;step-3&#34; class=&#34;etape&#34;&gt;
        &lt;legend&gt;&lt;span class=&#34;etape-numero&#34;&gt;3&lt;/span&gt; Paiement&lt;/legend&gt;
        &lt;div id=&#34;prix-total&#34; style=&#34;display:none&#34;&gt;Total : ... ‚Ç¨&lt;/div&gt;
				&lt;button type=&#34;button&#34; id=&#34;checkout-button&#34; class=&#34;bouton-checkout  bouton-verrouille&#34; style=&#34;display:none&#34;&gt;
          Payer avec Stripe
        &lt;/button&gt;
				&lt;script src=&#34;https://js.stripe.com/v3/&#34;&gt;&lt;/script&gt;
      &lt;/fieldset&gt;
    &lt;/form&gt;
  &lt;/div&gt;
	&lt;!-- R√©sum√© commande --&gt;
	&lt;div class=&#34;checkout-right&#34;&gt;
		&lt;h3&gt;R√©sum√© de la commande&lt;/h3&gt;
		&lt;ul id=&#34;panier-resume&#34;&gt;&lt;/ul&gt;
		&lt;p id=&#34;total-commande&#34;&gt;&lt;strong&gt;Total :&lt;/strong&gt; ... ‚Ç¨ frais de port inclus&lt;/p&gt;</description>
    </item>
    <item>
      <title>Finaliser ma commande</title>
      <link>https://encompagniedesetoiles.fr/checkout.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/checkout.html</guid>
      <description>&lt;!-- Pour Mondial Relay --&gt;
&lt;script src=&#34;//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//unpkg.com/leaflet/dist/leaflet.js&#34;&gt;&lt;/script&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;//unpkg.com/leaflet/dist/leaflet.css&#34; /&gt;
&lt;script src=&#34;//widget.mondialrelay.com/parcelshop-picker/jquery.plugin.mondialrelay.parcelshoppicker.min.js&#34;&gt;&lt;/script&gt;
&lt;!-- Autocompl√©tion d&#39;adresse via Geoportail --&gt;
&lt;script&gt;
document.addEventListener(&#34;DOMContentLoaded&#34;, () =&gt; {

  // üîÅ Surveille les champs nom, pr√©nom, adresse, mail
  [&#34;nom&#34;, &#34;prenom&#34;, &#34;adresse&#34;, &#34;mail&#34;].forEach(id =&gt; {
    const champ = document.getElementById(id);
    if (champ) {
      champ.addEventListener(&#34;input&#34;, surveillerEtape1);
    }
  });

  const adresseInput = document.getElementById(&#34;adresse&#34;);
  const cpInput      = document.getElementById(&#34;code-postal&#34;);
  
	adresseInput.addEventListener(&#34;input&#34;, async e =&gt; {
    const q = e.target.value.trim();
    if (q.length &lt; 3) return;

		const res = await fetch(`https://data.geopf.fr/geocodage/completion?text=${encodeURIComponent(q)}&amp;limit=5&amp;terr=METROPOLE`);

    const data = await res.json();
		//console.log(&#34;üîµ Suggestions re√ßues :&#34;, data);

    const cont = document.getElementById(&#34;autocomplete-container&#34;);
		cont.innerHTML = &#34;&#34;;
		cont.style.display = &#34;none&#34;;

		let count = 0;
		data.results?.forEach(item =&gt; {
			const div = document.createElement(&#34;div&#34;);
			div.className = &#34;suggestion&#34;;
			div.textContent = item.fulltext || `${item.number} ${item.street} ${item.city}`;
			div.addEventListener(&#34;click&#34;, () =&gt; {
				adresseInput.value = div.textContent;
				remplirAdresseGeo(item);
				cont.innerHTML = &#34;&#34;;
				cont.style.display = &#34;none&#34;;
			});
			cont.appendChild(div);
			count++;
		});

		cont.style.display = count ? &#34;block&#34; : &#34;none&#34;

  });

	// document.getElementById(&#34;bouton-relai&#34;).addEventListener(&#34;click&#34;, afficherPopupMondialRelay);

	const cp = localStorage.getItem(&#39;codePostal&#39;)?.trim() || &#34;&#34;;
	const ville = localStorage.getItem(&#39;ville&#39;)?.trim() || &#34;&#34;;

	$(&#34;#Zone_Widget&#34;).MR_ParcelShopPicker({
		Target: &#34;#Target_Widget&#34;,
		Brand: &#34;CC23JV2D&#34;,
		Country: &#34;FR&#34;,
		AllowedCountries: &#34;FR&#34;,
		Language: &#34;FR&#34;,
		EnableGeolocalisatedSearch: &#34;Yes&#34;,
		PostCode: cp,
		City: ville,
		NbResults: &#34;10&#34;,
		ColLivMod: &#34;XL&#34;,
		Responsive: true,
		ShowResultsOnMap: false,
		OnParcelShopSelected: function (data) {
      const zoneInfo = document.getElementById(&#34;relai-selectionne&#34;);
      const champ = document.getElementById(&#34;info-relai&#34;);
      if (!zoneInfo || !champ) return;

      const fullName = `&lt;strong&gt;${data.Nom}&lt;/strong&gt;&lt;br&gt;${data.Adresse1}, ${data.CP} ${data.Ville}`;
      let horaires = &#34;&#34;;

      if (data.HoursHtmlTable) {
        const parser = new DOMParser();
        const doc = parser.parseFromString(data.HoursHtmlTable, &#34;text/html&#34;);
        const rows = doc.querySelectorAll(&#34;table tr&#34;);
        const horairesBruts = [];

        rows.forEach(row =&gt; {
          const jour = row.querySelector(&#34;th&#34;)?.textContent?.trim()?.slice(0, 3);
          const tds = row.querySelectorAll(&#34;td&#34;);
          const heures = Array.from(tds).map(td =&gt; td.textContent.trim()).filter(Boolean).join(&#34; / &#34;);
          if (jour) horairesBruts.push({ jour, horaires: heures || &#34;-&#34; });
        });

        const groupes = {};
        horairesBruts.forEach(({ jour, horaires }) =&gt; {
          if (!groupes[horaires]) groupes[horaires] = [];
          groupes[horaires].push(jour);
        });

        const joursFR = { Mon: &#34;Lun&#34;, Tue: &#34;Mar&#34;, Wed: &#34;Mer&#34;, Thu: &#34;Jeu&#34;, Fri: &#34;Ven&#34;, Sat: &#34;Sam&#34;, Sun: &#34;Dim&#34; };

        const lignes = Object.entries(groupes).map(([horaires, jours]) =&gt; {
          const trad = jours.map(j =&gt; joursFR[j] || j);
          const etiquette = trad.length === 1 ? trad[0] : `${trad[0]}‚Äì${trad[trad.length - 1]}`;
          return `&lt;div id=&#34;horaires-relai&#34;&gt;&lt;strong&gt;${etiquette}&lt;/strong&gt; : ${horaires}&lt;/div&gt;`;
        });

        horaires = lignes.join(&#34;&#34;);
      }

      const html = `
        &lt;div class=&#34;carte-relai&#34;&gt;
          &lt;div class=&#34;entete-relai&#34;&gt;&lt;span class=&#34;icone-carte&#34;&gt;üìç&lt;/span&gt;&lt;strong&gt;${data.Nom}&lt;/strong&gt;&lt;/div&gt;
          &lt;div class=&#34;adresse-relai&#34;&gt;${data.Adresse1}&lt;br&gt;${data.CP} ${data.Ville}&lt;/div&gt;
          &lt;div class=&#34;horaire-relai&#34;&gt;
            &lt;div class=&#34;horloge&#34;&gt;üïí Horaires :&lt;/div&gt;
            &lt;div class=&#34;table-horaire&#34;&gt;${horaires}&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      `;

      champ.innerHTML = html;
      zoneInfo.style.display = &#34;block&#34;;

      window._pointRelaisAdresse = `${data.Nom}, ${data.Adresse1}, ${data.CP} ${data.Ville}`;
      window._pointRelaisId = data.ID;

			// On affiche le bouton de validation du relais
			const boutonValidationRelais = document.getElementById(&#34;validation-relais-button&#34;);
			boutonValidationRelais.classList.remove(&#34;bouton-verrouille&#34;);
			boutonValidationRelais.style.display = &#34;block&#34;;
			
			// On d√©sactive le bouton de paiment (juste pour donner l&#39;impression au client qu&#39;il doit valider son relais
			const etape3 = document.getElementById(&#34;step-3&#34;);
			etape3.classList.remove(&#34;actif&#34;);
			const boutonPaiement = document.getElementById(&#34;checkout-button&#34;);
			boutonPaiement.classList.add(&#34;bouton-verrouille&#34;);
    }
	});

	//Affichage du contenu du panier
	afficherPanierDansCheckout();
});

window.addEventListener(&#34;panierMisAJour&#34;, () =&gt; {
  afficherPanierDansCheckout();
});

function afficherPanierDansCheckout() {
	const panierJSON = localStorage.getItem(&#34;panier&#34;);
	if (!panierJSON) return;

	let total = 0;
	const panier = JSON.parse(panierJSON);
	const ul = document.getElementById(&#34;panier-resume&#34;);

	ul.innerHTML = &#34;&#34;;
	panier.forEach(article =&gt; {
		const li = document.createElement(&#34;li&#34;);
		li.innerHTML = `
			&lt;div style=&#34;display:flex; gap:10px; margin-bottom:10px;&#34;&gt;
				&lt;img src=&#34;${article.image}&#34; alt=&#34;${article.nom}&#34; style=&#34;height:48px; width:auto; border-radius:4px;&#34;&gt;
				&lt;div&gt;
					&lt;strong&gt;${article.nom}&lt;/strong&gt;&lt;br&gt;
					&lt;span style=&#34;font-size:0.9em;&#34;&gt;${article.description}&lt;/span&gt;&lt;br&gt;
					&lt;span&gt;${article.quantite} √ó ${article.prix}${article.monnaie}&lt;/span&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		`;
		ul.appendChild(li);
		total += article.prix * article.quantite;
	});

	document.getElementById(&#34;total-commande&#34;).innerHTML = `&lt;strong&gt;Total :&lt;/strong&gt; ${total} ‚Ç¨ frais de port inclus`;
  const totalPaiement = document.getElementById(&#34;prix-total&#34;);
  if (totalPaiement) {
    totalPaiement.innerHTML = `Total : ${total} ‚Ç¨`;
  }
}

function remplirAdresseGeo(item) {
  const cp    = item.zipcode || &#34;&#34;;
  const ville = item.city || item.oldcity || &#34;&#34;;
  const pays  = item.country || &#34;&#34;;
  const adresse = item.fulltext || `${item.street}, ${cp} ${ville}`;

  // Pr√©remplit le champ Adresse
  document.getElementById(&#34;adresse&#34;).value = adresse;

	// Stockage
	localStorage.setItem(&#39;codePostal&#39;, cp);
	localStorage.setItem(&#39;ville&#39;, ville);

  window.adresseGoogleValidee = true;

}

function surveillerEtape1() {
  const nom     = document.getElementById(&#34;nom&#34;).value.trim();
  const prenom  = document.getElementById(&#34;prenom&#34;).value.trim();
  const adresse = document.getElementById(&#34;adresse&#34;).value.trim();
  const mail = document.getElementById(&#34;mail&#34;).value.trim();

  const etape1 = document.getElementById(&#34;step-1&#34;);
  const etape2 = document.getElementById(&#34;step-2&#34;);
  const etape3 = document.getElementById(&#34;step-3&#34;);

  const etape_1_complete = nom &amp;&amp; prenom &amp;&amp; adresse &amp;&amp; mail;

  if (etape_1_complete) {
    etape2.classList.add(&#34;actif&#34;);
	  // Affiche ou masque les points relais
		// const boutonrelai = document.getElementById(&#34;bouton-relai&#34;);
		// boutonrelai.style.display = &#34;inline-block&#34;;
		const widgetrelai = document.getElementById(&#34;zone-widget-relai&#34;);
		widgetrelai.style.display = &#34;inline-block&#34;;
  } else {
    etape2.classList.remove(&#34;actif&#34;);
		const widgetrelai = document.getElementById(&#34;zone-widget-relai&#34;);
		widgetrelai.style.display = &#34;none&#34;;

		etape3.classList.remove(&#34;actif&#34;);
		const boutonPaiement = document.getElementById(&#34;checkout-button&#34;);
		boutonPaiement.classList.add(&#34;bouton-verrouille&#34;);
  }
}

function verifierEtatPaiement() {
  const panier = JSON.parse(localStorage.getItem(&#34;panier&#34;)) || [];
  const boutonStripe = document.getElementById(&#34;checkout-button&#34;);

  const steps = [
    document.getElementById(&#34;step-1&#34;),
    document.getElementById(&#34;step-2&#34;),
    document.getElementById(&#34;step-3&#34;)
  ];

  if (!boutonStripe) return;

  if (panier.length === 0) {
    //boutonStripe.disabled = true;
    //boutonStripe.classList.add(&#34;bouton-verrouille&#34;);

    // ‚ùå Retire la classe actif pour les √©tapes
    steps.forEach(step =&gt; step.classList.remove(&#34;actif&#34;));
  } else {
   //boutonStripe.disabled = false;
    //boutonStripe.classList.remove(&#34;bouton-verrouille&#34;);

    // ‚úÖ Ajoute actif pour les √©tapes si l&#39;adresse est remplie
    surveillerEtape1(); // Cela r√©active step-2 et step-3 si conditions sont remplies
  }
}


window.addEventListener(&#34;panierMisAJour&#34;, function () {
    verifierEtatPaiement();
});

&lt;/script&gt;
&lt;div class=&#34;checkout-wrapper&#34;&gt;
  &lt;div class=&#34;checkout-left&#34;&gt;
    &lt;form id=&#34;checkout-form&#34;&gt;
      &lt;!-- √âtape 1 : Facturation --&gt;
      &lt;fieldset id=&#34;step-1&#34; class=&#34;etape actif&#34;&gt;
        &lt;legend&gt;&lt;span class=&#34;etape-numero&#34;&gt;1&lt;/span&gt; Facturation&lt;/legend&gt;
        &lt;label&gt;Nom :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;nom&#34; id=&#34;nom&#34; required /&gt;&lt;/label&gt;
        &lt;label&gt;Pr√©nom :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;prenom&#34; id=&#34;prenom&#34; required /&gt;&lt;/label&gt;
				&lt;div style=&#34;position:relative;&#34;&gt;
					&lt;label&gt;Adresse :&lt;br&gt;
						&lt;input type=&#34;text&#34; id=&#34;adresse&#34; name=&#34;adresse&#34; autocomplete=&#34;off&#34; required
									 placeholder=&#34;Saisissez une adresse&#34; /&gt;
					&lt;/label&gt;
					&lt;div id=&#34;autocomplete-container&#34;&gt;&lt;/div&gt;
				&lt;/div&gt;
        &lt;label&gt;Compl√©ment d&#39;addresse :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;complement_adresse&#34; id=&#34;complement_adresse&#34;/&gt;&lt;/label&gt;
        &lt;label&gt;Mail :&lt;br&gt;&lt;input type=&#34;text&#34; name=&#34;mail&#34; id=&#34;mail&#34; required /&gt;&lt;/label&gt;
			&lt;/fieldset&gt;
      &lt;!-- √âtape 2 : Livraison --&gt;
      &lt;fieldset id=&#34;step-2&#34; class=&#34;etape&#34;&gt;
        &lt;legend&gt;&lt;span class=&#34;etape-numero&#34;&gt;2&lt;/span&gt; Livraison&lt;/legend&gt;
        &lt;div id=&#34;livraison-section&#34;&gt;
          &lt;div id=&#34;bloc-ville-cp&#34; style=&#34;display:none; margin-bottom:1em;&#34;&gt;
              &lt;input type=&#34;text&#34; id=&#34;code-postal&#34; name=&#34;code-postal&#34; maxlength=&#34;5&#34; style=&#34;display:none;&#34;&gt;
              &lt;input type=&#34;text&#34; id=&#34;ville&#34; name=&#34;ville&#34;  style=&#34;display:none;&#34;&gt;
          &lt;/div&gt;
					&lt;!-- Zone d‚Äôint√©gration directe du widget Mondial Relay --&gt;
					&lt;div id=&#34;zone-widget-relai&#34; style=&#34;display:none; margin-top:0em;&#34;&gt;
						&lt;div id=&#34;Zone_Widget&#34;&gt;&lt;/div&gt;
						&lt;input type=&#34;hidden&#34; id=&#34;Target_Widget&#34; name=&#34;point-relay&#34; /&gt;
					&lt;/div&gt;
					&lt;!-- Zone d&#39;affichage du point relais choisi --&gt;
					&lt;div id=&#34;relai-selectionne&#34; style=&#34;display:none; margin-top:0.5em; margin-bottom:0.5em;&#34;&gt;
						&lt;div id=&#34;titre-relai-selectionne&#34;&gt;&lt;strong&gt;Relais s√©lectionn√© :&lt;/strong&gt;&lt;/div&gt;
						&lt;div id=&#34;info-relai&#34;&gt;&lt;/div&gt;
					&lt;/div&gt;
					&lt;button type=&#34;button&#34; id=&#34;validation-relais-button&#34; class=&#34;bouton-validation-relai  bouton-verrouille&#34; style=&#34;display:none&#34;&gt;
						Choisir ce point relais
					&lt;/button&gt;
        &lt;/div&gt;
			&lt;/fieldset&gt;
      &lt;!-- √âtape 3 : Paiement --&gt;
      &lt;fieldset id=&#34;step-3&#34; class=&#34;etape&#34;&gt;
        &lt;legend&gt;&lt;span class=&#34;etape-numero&#34;&gt;3&lt;/span&gt; Paiement&lt;/legend&gt;
        &lt;div id=&#34;prix-total&#34; style=&#34;display:none&#34;&gt;Total : ... ‚Ç¨&lt;/div&gt;
				&lt;button type=&#34;button&#34; id=&#34;checkout-button&#34; class=&#34;bouton-checkout  bouton-verrouille&#34; style=&#34;display:none&#34;&gt;
          Payer avec Stripe
        &lt;/button&gt;
				&lt;script src=&#34;https://js.stripe.com/v3/&#34;&gt;&lt;/script&gt;
      &lt;/fieldset&gt;
    &lt;/form&gt;
  &lt;/div&gt;
	&lt;!-- R√©sum√© commande --&gt;
	&lt;div class=&#34;checkout-right&#34;&gt;
		&lt;h3&gt;R√©sum√© de la commande&lt;/h3&gt;
		&lt;ul id=&#34;panier-resume&#34;&gt;&lt;/ul&gt;
		&lt;p id=&#34;total-commande&#34;&gt;&lt;strong&gt;Total :&lt;/strong&gt; ... ‚Ç¨ frais de port inclus&lt;/p&gt;</description>
    </item>
    <item>
      <title>Luminaire BD</title>
      <link>https://encompagniedesetoiles.fr/produits/luminaire-touroutin/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/produits/luminaire-touroutin/</guid>
      <description>Sph√®re lumineuse en carton color√© et planches de bande dessin√©e</description>
    </item>
    <item>
      <title>Luminaire Carte vintage</title>
      <link>https://encompagniedesetoiles.fr/produits/luminaire-toucarjau/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/produits/luminaire-toucarjau/</guid>
      <description>Sph√®re lumineuse en carton color√© et cartes scolaires vintage</description>
    </item>
    <item>
      <title>Luminaire du C√¥t√© de chez Swann</title>
      <link>https://encompagniedesetoiles.fr/produits/luminaire-tourosswa/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/produits/luminaire-tourosswa/</guid>
      <description>Sph√®re lumineuse en carton color√© et feuilles du C√¥t√© de chez Swann</description>
    </item>
    <item>
      <title>Luminaire Iridescent bleu- vert</title>
      <link>https://encompagniedesetoiles.fr/produits/luminaire-seriritra/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/produits/luminaire-seriritra/</guid>
      <description>Sph√®re lumineuse en plexiglas iridescent</description>
    </item>
    <item>
      <title>Luminaire Lyra</title>
      <link>https://encompagniedesetoiles.fr/produits/luminaire-touroumus/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/produits/luminaire-touroumus/</guid>
      <description>Sph√®re lumineuse en carton color√© et partitions anciennes</description>
    </item>
    <item>
      <title>Luminaire Maestro</title>
      <link>https://encompagniedesetoiles.fr/produits/luminaire-serblemus/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/produits/luminaire-serblemus/</guid>
      <description>Sph√®re lumineuse en carton color√© et partitions anciennes</description>
    </item>
    <item>
      <title>Luminaire Manga</title>
      <link>https://encompagniedesetoiles.fr/produits/luminaire-carjaudra/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/produits/luminaire-carjaudra/</guid>
      <description>Sph√®re lumineuse en carton color√© et planches de manga</description>
    </item>
    <item>
      <title>Luminaire Manga 2</title>
      <link>https://encompagniedesetoiles.fr/produits/luminaire-caroranar/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/produits/luminaire-caroranar/</guid>
      <description>Sph√®re lumineuse en carton color√© et planches de manga (Naruto)</description>
    </item>
    <item>
      <title>Luminaire Nuit √âtoil√©e</title>
      <link>https://encompagniedesetoiles.fr/produits/luminaire-crunoiorb/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/produits/luminaire-crunoiorb/</guid>
      <description>Sph√®re lumineuse en carton color√© et int√©rieur dor√©</description>
    </item>
    <item>
      <title>Mentions l√©gales</title>
      <link>https://encompagniedesetoiles.fr/mentions-legales/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/mentions-legales/</guid>
      <description>Mentions l√©gales du site encompagniedesetoiles.fr</description>
    </item>
    <item>
      <title>Politique de confidentialit√©</title>
      <link>https://encompagniedesetoiles.fr/politique-confidentialite/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://encompagniedesetoiles.fr/politique-confidentialite/</guid>
      <description>Politique de confidentialit√© du site encompagniedesetoiles.fr</description>
    </item>
  </channel>
</rss>
