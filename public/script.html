<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Filtre JSON communes</title>
</head>
<body>
  <h2>Extraction des codes postaux...</h2>
  <pre id="resultat"></pre>

  <script>
    // Charge le fichier local
    fetch("communes-france-avec-polygon-2025.json")
      .then(res => res.json())
      .then(full => {
        // Transforme en version allégée
        const allégé = full.data.map(item => ({
          code_postal: item.code_postal,
          nom_commune: item.nom_standard
        }));

        // Affiche le résultat formaté
        document.getElementById("resultat").textContent = JSON.stringify(allégé, null, 2);
      })
      .catch(err => {
        document.getElementById("resultat").textContent = "Erreur : " + err;
      });
  </script>
</body>
</html>
